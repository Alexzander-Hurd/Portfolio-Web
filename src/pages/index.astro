---
import Layout from "../layouts/BaseLayout.astro";
import HeroImage from "../assets/hero-image.jpg";
import { getCollection } from "astro:content";
import BlogCard from "../components/BlogCard.astro";
import ProjectCard from "../components/ProjectCard.astro";
import { Image } from "astro:assets";

const blogPosts = (await getCollection("blog"))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 3);
const projects = (await getCollection("portfolio"))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 2);
---

<Layout
	title="Welcome to Alex Hurd UK"
	description="Developer & amateur photographer exploring technology and creativity."
	image={HeroImage}
>
	<!-- Hero -->
	<section class="text-center">
		<Image
			width={720}
			height={420}
			src={HeroImage}
			alt="Hero Image"
			class="mx-auto"
		/>
		<h2 class="text-4xl md:text-6xl font-bold">Hi, I'm Alex ðŸ‘‹</h2>
		<p class="text-xl mt-4 text-gray-500">
			Developer & amateur photographer exploring technology and
			creativity.
		</p>
		<div class="mt-6 flex justify-center gap-4">
			<a href="/portfolio" class="btn btn-primary">View Portfolio</a>
			<a href="/blog" class="btn btn-secondary">Read the Blog</a>
		</div>
	</section>

	<!-- Projects -->
	<section>
		<h3 class="text-2xl font-semibold mb-6">Featured Projects</h3>
		<div class="grid gap-6 md:grid-cols-2">
			{
				projects.length > 0 ? (
					projects.map((post) => (
						<ProjectCard project={post} />
					))
				) : (
					<p>No blog posts found.</p>
				)
			}
		</div>
		<div class="mt-4 text-right">
			<a href="/portfolio" class="text-blue-500 hover:underline"
				>See all projects â†’</a
			>
		</div>
	</section>

	<!-- Blog Posts -->
	<section>
		<h3 class="text-2xl font-semibold mb-6">Latest Blog Posts</h3>
		<div class="grid gap-4">
			{
				blogPosts.length > 0 ? (
					blogPosts.map((post) => <BlogCard entry={post} />)
				) : (
					<p>No blog posts found.</p>
				)
			}
		</div>
		<div class="mt-4 text-right">
			<a href="/blog" class="text-blue-500 hover:underline"
				>See all posts â†’</a
			>
		</div>
	</section>
</Layout>
